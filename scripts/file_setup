#scripts/file_setup


##Check if files exists and their extension
## usage: provide input directory

function check_files() {
    if [ -d "${1}" ]; then
        printf "${1} \033[1m\033[36m OK \033[0m\n"
        ### checking fastq extension --> ".gz"
	    shopt -s nullglob
		for file in "${1}"/*.{fq,fastq,fastq.gz}
		    do
			    if [[ "${file}" =~ \.fastq$ ]] || [[ "${file}" =~ \.fq$ ]]; then
				    gzip "${file}"
					printf "${file} \033[1m\033[36m OK \033[0m\n...compressing...\n"
			    elif [[ "${file}" =~ \.gz$ ]]; then
				    printf "${file} \033[1m\033[36m OK \033[0m\n"
				else
					echo
					printf "\033[1m\033[31mError!! wrong extension in raw data\033[0m\n"
					exit 1
			    fi
		done
    else
        printf "\033[1m\033[31m Error: ${1} not found. Cannot continue.\033[0m\n"
        exit 1
    fi
}



##Check if destination exists, otherwise it creates it
## usage: provide directory to check

function check_dir() {
	if [ -d "${1}" ]; then
		echo
  		printf "${1} OK\n"
		printf "Creating subdirectories\n"
  		mkdir -p ${1}/{fastqc,crispresso}
	else
		echo
  		printf "${1} not found. Creating....\n"
  		mkdir -p ${1}/{fastqc,crispresso}
	fi
}
